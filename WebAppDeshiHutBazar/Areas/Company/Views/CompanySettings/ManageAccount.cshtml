@model WebDeshiHutBazarAccountViewModel
@{
    ViewBag.Title = Common.Language.LanguageDefault.ViewBagTitleManageAccount;
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.ExcludeHeader = false;
}
<div class="container">
    <div class="row">
        <div class="col-md-offset-3 col-md-6 col-xs-12 col-sm-offset-3 col-sm-6 col-lg-offset-3 col-lg-6 text-center">
            <h4 class="main-title">
                Manage Company Account and Products
            </h4>
        </div>
    </div>

    @using (Html.BeginForm("UpdateCompany", "CompanySettings"))
    {
        <div class="row card-form">
            <div class="col-md-3 col-xs-12 col-sm-3 col-lg-3">
                @if (Model.Agreement)
                {
                    <a id="btnNewProduct" href="@Url.Action("NewPost","NewProduct")" class="primary-button flex max text-center" role="button">
                        ADD NEW PRODUCT
                    </a>
                }
                else
                {
                    <a id="btnNewProduct" class="primary-button flex max text-center disabled" role="button">
                        ADD NEW PRODUCT
                    </a>
                }
            </div>
            <div class="col-md-3 col-xs-12 col-sm-3 col-lg-3">
                @if (Model.Agreement)
                {
                    <a id="btnAllProducts" href="@Url.Action("Manage","ManageProducts")" class="primary-button flex max text-center" role="button">
                        ALL PRODUCTS
                    </a>
                }
                else
                {
                    <a id="btnAllProducts" class="primary-button flex max text-center disabled" role="button">
                        ALL PRODUCTS
                    </a>
                }
            </div>
            <div class="col-md-3 col-xs-12 col-sm-3 col-lg-3">
                <button id="btnSubmitPost" class="primary-button flex max text-center" role="button">
                    SAVE ALL
                </button>
            </div>
        </div>
        @Html.HiddenFor(a => a.UserID)
        @Html.HiddenFor(a => a.CompanyID)
        <br />
        <ul class="nav nav-tabs new-nav-tabs"
            role="tablist">
            <li role="presentation"
                class="active">
                <a id="ancrAccount"
                   aria-controls="account"
                   role="tab"
                   data-toggle="tab"
                   class="tab-btn">
                    Account
                </a>
            </li>
            <li role="presentation">
                <a id="ancrCompany"
                   aria-controls="company"
                   role="tab"
                   data-toggle="tab"
                   class="tab-btn">
                    Company
                </a>
            </li>
            <li role="presentation">
                <a id="ancrBank"
                   aria-controls="bank"
                   role="tab"
                   data-toggle="tab"
                   class="tab-btn">
                    Bank
                </a>
            </li>
            <li role="presentation">
                <a id="ancrShop"
                   aria-controls="shop"
                   role="tab"
                   data-toggle="tab"
                   class="tab-btn">
                    Shop
                </a>
            </li>
            <li role="presentation">
                <a id="ancrBills"
                   aria-controls="bills"
                   role="tab"
                   data-toggle="tab"
                   class="tab-btn">
                    Bills
                </a>
            </li>
            <li role="presentation">
                <a id="ancrVisitors"
                   aria-controls="visitors"
                   role="tab"
                   data-toggle="tab"
                   class="tab-btn">
                    Visitors
                </a>
            </li>
            <li role="presentation">
                <a id="ancrPassword"
                   aria-controls="password"
                   role="tab"
                   data-toggle="tab"
                   class="tab-btn">
                    Password
                </a>
            </li>
        </ul>
        <div class="tab-content">
            <div role="tabpanel"
                 class="tab-pane active form-horizontal"
                 id="account">
                @Html.Partial("../../Areas/Company/Views/CompanySettings/_MyAccount", Model)
            </div>
            <div role="tabpanel"
                 class="tab-pane form-horizontal"
                 id="company">
                @Html.Partial("../../Areas/Company/Views/CompanySettings/_CompanyInformation", Model)
            </div>
            <div role="tabpanel"
                 class="tab-pane form-horizontal"
                 id="bank">
                @Html.Partial("../../Areas/Company/Views/CompanySettings/_CompanyBankInformation", Model)
            </div>
            <div role="tabpanel"
                 class="tab-pane form-horizontal"
                 id="shop">
                @Html.Partial("../../Areas/Company/Views/CompanySettings/_ShopInformation", Model)
            </div>
            <div role="tabpanel"
                 class="tab-pane form-horizontal"
                 id="bills">
                @Html.Partial("../../Areas/Company/Views/CompanySettings/_MyBills", Model)
            </div>
            <div role="tabpanel"
                 class="tab-pane form-horizontal"
                 id="visitors">
                @Html.Partial("../../Areas/Company/Views/CompanySettings/_MyPostVisitors", Model)
            </div>
            <div role="tabpanel"
                 class="tab-pane form-horizontal"
                 id="password">
                @Html.Partial("../../Areas/Company/Views/CompanySettings/_ChangePassword", Model)
            </div>
        </div>
    }
</div>
@section scriptsapp {
    <script type="text/javascript">
        PAGE_NAME = '@Model.PageName';
        var tradeLicenseUploadURL = '@Url.Action("ImageTradeLicenseUpload", "CompanySettings")';
        var ownerNIDUploadURL = '@Url.Action("ImageOwnerNIDUpload", "CompanySettings")';
        var tradeLicensePartialLoadURL = '@Url.Action("ImageLoadTradeLicense", "CompanySettings")';
        var ownerNIDPartialLoadURL = '@Url.Action("ImageLoadOwnerNIDFile", "CompanySettings")';
        var removeOwnerNIDFileURL = '@Url.Action("RemoveOwnerNIDFile", "CompanySettings")';
        var removeTradeLicenseFileURL = '@Url.Action("RemoveTradeLicenseFile", "CompanySettings")';
        $(function () {
            $(".tab-btn").click(function (e) {
                e.preventDefault();
                $(".tab-pane").removeClass("active");
                var container = $(this).attr("aria-controls");
                $("#" + container).addClass("active");
            });

            $(document).on("click", "a.sell-or-rent", function () {
                $(this).closest(".sell-rent-parent").find(".sell-or-rent").removeClass("btn-info").addClass("btn-default");
                $(this).removeClass("btn-default").addClass("btn-info");

                $(this).closest(".sell-rent-parent").find(".sell-or-rent").data("isselected", "False");
                var postID = $(this).data("valueid");

                if ($(this).hasClass("sell")) {
                    $("#txtRent-" + postID).hide();
                    $("#txtSell-" + postID).show();
                    $(this).data("isselected", "True");
                }
                else if ($(this).hasClass("rent")) {
                    $("#txtSell-" + postID).hide();
                    $("#txtRent-" + postID).show();
                    $(this).data("isselected", "True");
                }
            });

            $(document).on("click", "a.urgent-deal", function () {
                var postID = $(this).data("valueid");
                $(this).closest(".urgent-deal-parent").find(".urgent-deal").removeClass("btn-info").addClass("btn-default");
                $(this).removeClass("btn-default").addClass("btn-info");

                $(this).closest(".urgent-deal-parent").find(".urgent-deal").data("isselected", "False");
                var postID = $(this).data("valueid");

                if ($(this).hasClass("urgent")) {
                    $("#txtNotUrgentDeal-" + postID).hide();
                    $("#txtUrgentDeal-" + postID).show();
                    $(this).data("isselected", "True");
                }
                else if ($(this).hasClass("noturgent")) {
                    $("#txtUrgentDeal-" + postID).hide();
                    $("#txtNotUrgentDeal-" + postID).show();
                    $(this).data("isselected", "True");
                }
            });

            $(document).on("click", "a.new-used", function () {
                var postID = $(this).data("valueid");
                $(this).closest(".new-used-parent").find(".new-used").removeClass("btn-info").addClass("btn-default");
                $(this).removeClass("btn-default").addClass("btn-info");

                $(this).closest(".new-used-parent").find(".new-used").data("isselected", "False");

                if ($(this).hasClass("new")) {
                    $("#txtUsed-" + postID).hide();
                    $("#txtNew-" + postID).show();
                    $(this).data("isselected", "True");
                }
                else if ($(this).hasClass("used")) {
                    $("#txtNew-" + postID).hide();
                    $("#txtUsed-" + postID).show();
                    $(this).data("isselected", "True");
                }
            });

            $(document).on("click", ".btn-remove-image", function () {
                var that = this;
                var id = $(that).data("id");
                var rem = $(that).closest(".image-content");
                $(rem).remove();
                $.ajax({
                    url: '@Url.Action("ImageRemove", "ManagePost")?id=' + id,
                    type: 'GET',
                    dataType: 'json',
                    contentType: 'application/json; charset=utf-8',
                    error: function (xhr) {
                    },
                    success: function (categorytext) {
                    },
                    processData: false,
                    cache: false
                });
            });
        });
    </script>
    <script src="~/Scripts/ajaxupload.js"></script>
    <script src="~/Scripts/js/naimul.ui.editor.phone.js" type="text/javascript"></script>
    <script src="~/Scripts/js/naimul.ui.editor.price.js" type="text/javascript"></script>
    <script src="~/Scripts/js/naimul.ui.password.validation.js" type="text/javascript"></script>
    <script src="~/Scripts/js/naimul.ui.validation.js" type="text/javascript"></script>
    <script src="~/Scripts/js/Account/naimul.ui.manageaccount.js" type="text/javascript"></script>
    <script src="~/Scripts/js/UserSession/naimul.letitgo.user.session.js" type="text/javascript"></script>
    <script src="~/Scripts/js/Company/naimul.ui.company.js" type="text/javascript"></script>
}


