@model WebDeshiHutBazar.ManagePostViewModel
@{
    ViewBag.Title = "Manage Shop Products";
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.ExcludeHeader = false;
    var guid = Guid.NewGuid();
}
<script type="text/javascript">
    var editPostURL = '@Url.Action("EditPostByPostId", "ManageProducts")';
    var viewPostURL = '@Url.Action("ViewPostByPostId", "ManageProducts")';
    var updatePostURL = '@Url.Action("UpdatePost", "ManageProducts")';
    var deletePostURL = '@Url.Action("DeletePostByPostId", "ManageProducts")';
    var getSubCategoryURL = '@Url.Action("GetSubCategories", "ManageProducts")';
    var managePostURL = '@Url.Action("ManagePost", "ManageProducts")';
    var uploadCarouselURL = '@Url.Action("UploadCarousel", "ManageProducts")';
    var uploadThumbnailURL = '@Url.Action("UploadThumbnail", "ManageProducts")';
    var uploadSquareURL = '@Url.Action("UploadSquare", "ManageProducts")';
    var uploadRectangleURL = '@Url.Action("UploadRectangle", "ManageProducts")';
    var loadCarouselURL = '@Url.Action("LoadCarousel", "ManageProducts")';
    var loadThumbnailURL = '@Url.Action("LoadThumbnail", "ManageProducts")';
    var loadSquareURL = '@Url.Action("LoadSquare", "ManageProducts")';
    var loadRectangleURL = '@Url.Action("LoadRectangle", "ManageProducts")';
    var removeProductImageURL = '@Url.Action("ImageRemove", "ManageProducts")?id=';
</script>
<div id="top" class="container">
    <h4 class="main-title">Shop Products</h4>
    <div class="row card-form">
        <div class="col-md-3 col-xs-12 col-sm-3 col-lg-3">
            <a id="btnNewProduct" href="@Url.Action("NewPost","NewProduct")" class="primary-button flex max text-center" role="button">
                ADD NEW PRODUCT
            </a>
        </div>
        <div class="col-md-3 col-xs-12 col-sm-3 col-lg-3">
            <a id="btnAllProducts" href="@Url.Action("Manage","ManageProducts")" class="primary-button flex max text-center" role="button">
                REFRESH
            </a>
        </div>
    </div>

    @if (Model.ListPostViewModel != null && Model.ListPostViewModel.Count > 0)
    {
        foreach (var item in Model.ListPostViewModel.OrderBy(a => a.PostType).ToList())
        {
            @Html.Partial("../../Areas/Company/Views/ManageProducts/_SingleProductPanel", item)
        }
        @Html.EditorFor(a => a.PageingModelAll, "Paging")
    }
</div>
@section scriptsapp {
    <script type="text/javascript">
        PAGE_NAME = '@Model.PageName';
    </script>
    <script src="~/Scripts/js/naimul.ui.editor.phone.js" type="text/javascript"></script>
    <script src="~/Scripts/js/naimul.ui.editor.price.js" type="text/javascript"></script>
    <script src="~/Scripts/js/naimul.ui.validation.js" type="text/javascript"></script>
    <script src="~/Scripts/ajaxupload.js" type="text/javascript"></script>
    <script src="~/Scripts/js/Company/naimul.company.managepost.js" type="text/javascript"></script>
    <script src="~/Scripts/js/UserSession/naimul.letitgo.user.session.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $(document).on("click", "a.sell-or-rent", function () {
                $(this).closest(".sell-rent-parent").find(".sell-or-rent").removeClass("btn-info").addClass("btn-default");
                $(this).removeClass("btn-default").addClass("btn-info");
                $(this).closest(".sell-rent-parent").find(".sell-or-rent").data("isselected", "False");
                var postID = $(this).data("valueid");

                if ($(this).hasClass("sell")) {
                    $("#txtRent-" + postID).hide();
                    $("#txtSell-" + postID).show();
                    $(this).data("isselected", "True");
                }
                else if ($(this).hasClass("rent")) {
                    $("#txtSell-" + postID).hide();
                    $("#txtRent-" + postID).show();
                    $(this).data("isselected", "True");
                }
            });

            $(document).on("click", "a.urgent-deal", function () {
                var postID = $(this).data("valueid");
                $(this).closest(".urgent-deal-parent").find(".urgent-deal").removeClass("btn-info").addClass("btn-default");
                $(this).removeClass("btn-default").addClass("btn-info");
                $(this).closest(".urgent-deal-parent").find(".urgent-deal").data("isselected", "False");
                var postID = $(this).data("valueid");
                if ($(this).hasClass("urgent")) {
                    $("#txtNotUrgentDeal-" + postID).hide();
                    $("#txtUrgentDeal-" + postID).show();
                    $(this).data("isselected", "True");
                }
                else if ($(this).hasClass("noturgent")) {
                    $("#txtUrgentDeal-" + postID).hide();
                    $("#txtNotUrgentDeal-" + postID).show();
                    $(this).data("isselected", "True");
                }
            });

            $(document).on("click", "a.new-used", function () {
                var postID = $(this).data("valueid");
                $(this).closest(".new-used-parent").find(".new-used").removeClass("btn-info").addClass("btn-default");
                $(this).removeClass("btn-default").addClass("btn-info");
                $(this).closest(".new-used-parent").find(".new-used").data("isselected", "False");
                if ($(this).hasClass("new")) {
                    $("#txtUsed-" + postID).hide();
                    $("#txtNew-" + postID).show();
                    $(this).data("isselected", "True");
                }
                else if ($(this).hasClass("used")) {
                    $("#txtNew-" + postID).hide();
                    $("#txtUsed-" + postID).show();
                    $(this).data("isselected", "True");
                }
            });

            $(document).on("click", ".btn-remove-image", function () {
                var that = this;
                var id = $(that).data("id");
                var rem = $(that).closest(".image-content");
                $(rem).remove();
                $.ajax({
                    url: '@Url.Action("ImageRemove", "ManagePost")?id=' + id,
                    type: 'GET',
                    dataType: 'json',
                    contentType: 'application/json; charset=utf-8',
                    error: function (xhr) {
                    },
                    success: function (categorytext) {
                    },
                    processData: false,
                    cache: false
                });
            });

            UploadCarousel();
            UploadThumbnail();
            UploadSquare();
            UploadRectangle();
        });
    </script>
}



